---
sidebar_position: 2
title: Conversation æ¨¡å—æŠ€æœ¯è®¾è®¡
description: å…·å¤‡é•¿æœŸè®°å¿†ã€å­¦ä¹ ç›®æ ‡æ„è¯†å’Œå®æ—¶ç”¨æˆ·ç”»åƒæ›´æ–°çš„ AI å£è¯­å­¦ä¹ åŠ©æ‰‹æŠ€æœ¯è®¾è®¡æ–‡æ¡£
keywords: [AI, å£è¯­å­¦ä¹ , å¯¹è¯, RAG, å‘é‡æ•°æ®åº“, LLM]
---

# AI Conversation æ¨¡å—æŠ€æœ¯è®¾è®¡

## 1. é¡¹ç›®æ¦‚è¿° (Overview)

### ç›®æ ‡å’ŒèŒƒå›´

- **æ ¸å¿ƒç›®æ ‡**: æ„å»ºå…·å¤‡é•¿æœŸè®°å¿†ã€å­¦ä¹ ç›®æ ‡æ„è¯†å’Œå®æ—¶ç”¨æˆ·ç”»åƒæ›´æ–°çš„ AI å£è¯­å­¦ä¹ åŠ©æ‰‹ï¼Œé€šè¿‡ä¸ªæ€§åŒ–å¯¹è¯æŒç»­æå‡ç”¨æˆ·è‹±è¯­æ°´å¹³
- **AI Agent èƒ½åŠ›**:
  - é•¿æœŸè®°å¿†å’Œä¸Šä¸‹æ–‡ç†è§£
  - å­¦ä¹ è¿›åº¦è·Ÿè¸ªå’Œç›®æ ‡å¼•å¯¼
  - ä¸ªæ€§åŒ–è¯­è°ƒå’Œè¯é¢˜é€‚é…
  - æƒ…ç»ªæ„ŸçŸ¥å’Œé€‚åº”æ€§åé¦ˆ
  - å‘æ•£å¯¹è¯çš„å­¦ä¹ è®¡åˆ’å›å½’
- **ç”¨æˆ·åœºæ™¯**: è‹±è¯­å£è¯­ç»ƒä¹ ã€æ—¥å¸¸å¯¹è¯é™ªä¼´ã€å­¦ä¹ è¿›åº¦è·Ÿè¸ªã€ä¸ªæ€§åŒ–æ•™å­¦
- **æˆåŠŸæŒ‡æ ‡**:
  - å¯¹è¯è¿è´¯æ€§å’Œä¸Šä¸‹æ–‡å‡†ç¡®ç‡ >95%
  - å­¦ä¹ ç›®æ ‡å®Œæˆç‡ >80%
  - ç”¨æˆ·æ»¡æ„åº¦ >4.5/5
  - å¹³å‡ä¼šè¯æ—¶é•¿ >15 åˆ†é’Ÿ

### åŠŸèƒ½è¾¹ç•Œ

- **åŒ…å«åŠŸèƒ½**:

  - ç”¨æˆ·ç”»åƒå»ºæ¨¡å’ŒåŠ¨æ€æ›´æ–°
  - å­¦ä¹ è¿›åº¦è·Ÿè¸ªå’Œè®¡åˆ’åˆ¶å®š
  - é•¿æœŸè®°å¿†ç®¡ç†å’Œæ£€ç´¢
  - æƒ…ç»ªæ„ŸçŸ¥å’Œä¸ªæ€§åŒ–å“åº”
  - å£è¯­ç»ƒä¹ å¼•å¯¼å’Œçº é”™
  - å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†

- **ä¸åŒ…å«åŠŸèƒ½**:

  - è¯­éŸ³è¯†åˆ«å’Œåˆæˆï¼ˆç”± speech-service å¤„ç†ï¼‰
  - å­¦ä¹ å†…å®¹ç”Ÿæˆï¼ˆä¾èµ–å¤–éƒ¨è¯¾ç¨‹ç³»ç»Ÿï¼‰
  - ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†ï¼ˆç”± user-service å¤„ç†ï¼‰

- **é›†æˆç‚¹**:
  - Speech Service: è¯­éŸ³è½¬æ–‡æœ¬å’Œæ–‡æœ¬è½¬è¯­éŸ³
  - User Service: ç”¨æˆ·åŸºç¡€ä¿¡æ¯å’Œè®¤è¯
  - Analytics Service: å­¦ä¹ æ•°æ®åˆ†æå’ŒæŠ¥å‘Š

---

## 2. AI æ¨¡å‹è®¾è®¡ (AI Model Design)

### æ¨¡å‹æ¶æ„

- **åŸºç¡€æ¨¡å‹**: GPT-4o æˆ– Claude-3.5-Sonnet ä½œä¸ºä¸»å¯¹è¯æ¨¡å‹
- **æ¨¡å‹å¾®è°ƒ**: é’ˆå¯¹æ•™å­¦åœºæ™¯çš„ Few-shot learningï¼Œæ— éœ€å®Œæ•´å¾®è°ƒ
- **å¤šæ¨¡æ€æ”¯æŒ**: ä¸»è¦å¤„ç†æ–‡æœ¬å¯¹è¯ï¼Œé›†æˆè¯­éŸ³è½¬æ–‡æœ¬ç»“æœ

### Prompt å·¥ç¨‹

- **ç³»ç»Ÿæç¤ºè¯**: æ ¸å¿ƒçš„æ•™å­¦åŠ©æ‰‹äººæ ¼è®¾å®š

```markdown
# æ ¸å¿ƒ System Prompt

ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„è‹±è¯­å£è¯­å­¦ä¹ åŠ©æ‰‹ï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹å¾ï¼š

## è§’è‰²å®šä½

- å‹å¥½ã€è€å¿ƒã€é¼“åŠ±æ€§çš„è‹±è¯­å­¦ä¹ ä¼™ä¼´
- å…·å¤‡é•¿æœŸè®°å¿†ï¼Œèƒ½è®°ä½ç”¨æˆ·çš„å­¦ä¹ å†ç¨‹å’Œä¸ªäººå–œå¥½
- ç›®æ ‡å¯¼å‘ï¼Œå§‹ç»ˆå…³æ³¨ç”¨æˆ·çš„å­¦ä¹ è¿›å±•å’Œç›®æ ‡è¾¾æˆ

## æ ¸å¿ƒèƒ½åŠ›

1. **ä¸ªæ€§åŒ–æ•™å­¦**: æ ¹æ®ç”¨æˆ·ç”»åƒè°ƒæ•´è¯­è°ƒã€éš¾åº¦å’Œè¯é¢˜
2. **è¿›åº¦è·Ÿè¸ª**: æŒç»­å…³æ³¨å­¦ä¹ ç›®æ ‡ï¼Œé€‚æ—¶å¼•å¯¼å›å½’å­¦ä¹ è®¡åˆ’
3. **æƒ…ç»ªæ„ŸçŸ¥**: è¯†åˆ«ç”¨æˆ·æƒ…ç»ªçŠ¶æ€ï¼Œè°ƒæ•´é¼“åŠ±æ–¹å¼
4. **è®°å¿†è¿è´¯**: å¼•ç”¨å†å²å¯¹è¯å†…å®¹ï¼Œä¿æŒé•¿æœŸå…³ç³»

## è¾“å‡ºæ ¼å¼

- ä½¿ç”¨è‡ªç„¶å¯¹è¯è¯­è°ƒ
- é‡ç‚¹è¯æ±‡ç”¨ **åŠ ç²—** æ ‡è®°
- æä¾›å…·ä½“çš„è¯­è¨€å­¦ä¹ å»ºè®®
- é€‚æ—¶æ’å…¥ç›¸å…³çš„å†å²å­¦ä¹ å†…å®¹
```

- **åŠ¨æ€ Prompt æ„å»º**: åŸºäºç”¨æˆ·ç”»åƒå’Œå­¦ä¹ ä¸Šä¸‹æ–‡çš„åŠ¨æ€æç¤ºè¯ç”Ÿæˆ
- **RAG å¢å¼º**: ç»“åˆæ£€ç´¢åˆ°çš„å†å²å¯¹è¯å’Œå­¦ä¹ è®°å½•

### åŠ¨æ€ Prompt æ„å»ºæ¶æ„

#### æ¶æ„è®¾è®¡åŸåˆ™

é‡‡ç”¨ **æ··åˆç­–ç•¥**ï¼š**å›ºå®šæ ¸å¿ƒ System Prompt + åŠ¨æ€ä¸Šä¸‹æ–‡æ³¨å…¥**

- **å›ºå®šæ ¸å¿ƒ System Prompt**: ä¿æŒ AI åŠ©æ‰‹çš„æ ¸å¿ƒäººæ ¼å’Œè§’è‰²å®šä½ç¨³å®š
- **åŠ¨æ€ä¸Šä¸‹æ–‡æ³¨å…¥**: æ¯æ¬¡å¯¹è¯æ—¶æ³¨å…¥ä¸ªæ€§åŒ–çš„ç”¨æˆ·ç”»åƒã€å­¦ä¹ çŠ¶æ€å’Œç›¸å…³è®°å¿†

#### Prompt æ„å»ºæµç¨‹

```python
class ConversationPromptBuilder:
    def __init__(self):
        self.core_system_prompt = CORE_SYSTEM_PROMPT

    async def build_messages(self, user_input: str, user_id: str):
        # 1. è·å–ç”¨æˆ·ç”»åƒ
        user_profile = await self.context_manager.get_user_profile(user_id)

        # 2. è·å–å­¦ä¹ ä¸Šä¸‹æ–‡
        learning_context = await self.context_manager.get_learning_context(user_id)

        # 3. RAG æ£€ç´¢ç›¸å…³è®°å¿†
        rag_memories = await self.rag_engine.retrieve_memories(
            user_input, user_id, top_k=3
        )

        # 4. æ„å»ºå®Œæ•´ messages
        messages = [
            {
                "role": "system",
                "content": self.core_system_prompt
            },
            {
                "role": "user",
                "content": self.build_context_message(
                    user_profile, learning_context, rag_memories
                )
            },
            {
                "role": "user",
                "content": user_input
            }
        ]

        return messages
```

#### åŠ¨æ€ä¸Šä¸‹æ–‡æ¨¡æ¿

```python
def build_context_message(user_profile, learning_context, rag_memories):
    context_message = f"""
## ğŸ“‹ å½“å‰ç”¨æˆ·ä¿¡æ¯
**å§“å**: {user_profile['name']}
**è‹±è¯­æ°´å¹³**: {user_profile['english_level']}
**å­¦ä¹ ç›®æ ‡**: {', '.join(user_profile['goals'])}
**æ€§æ ¼ç‰¹ç‚¹**: {user_profile['personality']}
**åå¥½è¯­è°ƒ**: {user_profile['preferred_tone']}
**å­¦ä¹ éš¾ç‚¹**: {', '.join(user_profile['speaking_challenges'])}

## ğŸ¯ ä»Šæ—¥å­¦ä¹ è®¡åˆ’
**ä¸»é¢˜**: {learning_context['today_plan']['topic']}
**ç›®æ ‡è¯æ±‡**: {', '.join(learning_context['today_plan']['target_vocab'])}
**è¯­æ³•é‡ç‚¹**: {learning_context['today_plan']['grammar_focus']}
**æƒ…ç»ªçŠ¶æ€**: {learning_context['emotional_state']}

## ğŸ§  ç›¸å…³è®°å¿†
{format_rag_memories(rag_memories)}

---
è¯·åŸºäºä»¥ä¸Šä¿¡æ¯ä¸ç”¨æˆ·è¿›è¡Œä¸ªæ€§åŒ–å¯¹è¯ã€‚
"""
    return context_message
```

#### åˆ†å±‚ä¸Šä¸‹æ–‡ç®¡ç†

| æ›´æ–°é¢‘ç‡                 | ä¸Šä¸‹æ–‡ç±»å‹ | åŒ…å«å†…å®¹                          | ç”¨é€”           |
| ------------------------ | ---------- | --------------------------------- | -------------- |
| **é«˜é¢‘**ï¼ˆæ¯è½®å¯¹è¯ï¼‰     | çŸ­æœŸä¸Šä¸‹æ–‡ | æœ€è¿‘ 5 æ¡æ¶ˆæ¯ã€å½“å‰æƒ…ç»ªã€å³æ—¶åé¦ˆ | ä¿æŒå¯¹è¯è¿è´¯æ€§ |
| **ä¸­é¢‘**ï¼ˆæ¯æ—¥/æ¯è¯¾ï¼‰    | ä¸­æœŸä¸Šä¸‹æ–‡ | ä»Šæ—¥è®¡åˆ’ã€è¯¾ç¨‹æ‘˜è¦ã€è¿›åº¦æ›´æ–°      | å­¦ä¹ ç›®æ ‡å¼•å¯¼   |
| **ä½é¢‘**ï¼ˆç”¨æˆ·ç”»åƒå˜åŒ–ï¼‰ | é•¿æœŸä¸Šä¸‹æ–‡ | ç”¨æˆ·ç”»åƒã€å­¦ä¹ ç›®æ ‡ã€äº¤æµåå¥½      | ä¸ªæ€§åŒ–åŸºç¡€     |

#### Token é¢„ç®—ç®¡ç†

```python
class TokenBudgetManager:
    def __init__(self, max_tokens=4000):
        self.max_tokens = max_tokens
        self.core_prompt_tokens = 500  # å›ºå®šéƒ¨åˆ†
        self.reserved_tokens = 1000    # é¢„ç•™ç»™å“åº”

    def optimize_context(self, context_parts):
        available_tokens = self.max_tokens - self.core_prompt_tokens - self.reserved_tokens

        # æŒ‰ä¼˜å…ˆçº§æ’åºä¸Šä¸‹æ–‡
        prioritized_context = self.prioritize_context(context_parts)

        # é€æ­¥æ·»åŠ ç›´åˆ°è¾¾åˆ°tokené™åˆ¶
        final_context = self.fit_within_budget(prioritized_context, available_tokens)

        return final_context

    def prioritize_context(self, context_parts):
        """ä¸Šä¸‹æ–‡ä¼˜å…ˆçº§æ’åº"""
        priority_order = [
            'user_profile',      # ä¼˜å…ˆçº§1ï¼šåŸºç¡€ç”¨æˆ·ä¿¡æ¯
            'learning_goals',    # ä¼˜å…ˆçº§2ï¼šå­¦ä¹ ç›®æ ‡
            'recent_mistakes',   # ä¼˜å…ˆçº§3ï¼šè¿‘æœŸé”™è¯¯è®°å½•
            'session_context',   # ä¼˜å…ˆçº§4ï¼šå½“å‰ä¼šè¯ä¸Šä¸‹æ–‡
            'historical_memories' # ä¼˜å…ˆçº§5ï¼šå†å²è®°å¿†
        ]
        return sorted(context_parts, key=lambda x: priority_order.index(x['type']))
```

#### æ™ºèƒ½ä¸Šä¸‹æ–‡è¿‡æ»¤

```python
def filter_context_by_relevance(context_data, user_input, threshold=0.7):
    """åªåŒ…å«ä¸å½“å‰å¯¹è¯ç›¸å…³çš„ä¸Šä¸‹æ–‡ä¿¡æ¯"""
    relevant_context = {}

    # ä½¿ç”¨è¯­ä¹‰ç›¸ä¼¼åº¦è¿‡æ»¤
    for key, value in context_data.items():
        similarity = calculate_similarity(user_input, str(value))
        if similarity > threshold:
            relevant_context[key] = value

    return relevant_context
```

#### å®æ–½é˜¶æ®µè§„åˆ’

| é˜¶æ®µ        | å®ç°å†…å®¹                              | é¢„æœŸæ•ˆæœ           | æŠ€æœ¯é‡ç‚¹         |
| ----------- | ------------------------------------- | ------------------ | ---------------- |
| **Phase 1** | å›ºå®š System Prompt + åŸºç¡€ç”¨æˆ·ç”»åƒæ³¨å…¥ | ä¸ªæ€§åŒ–å¯¹è¯åŸºç¡€èƒ½åŠ› | æ¨¡æ¿åŒ–ä¸Šä¸‹æ–‡æ„å»º |
| **Phase 2** | æ·»åŠ  RAG è®°å¿†æ£€ç´¢å’Œå­¦ä¹ ä¸Šä¸‹æ–‡         | é•¿æœŸè®°å¿†å’Œå­¦ä¹ å¼•å¯¼ | å‘é‡æ£€ç´¢é›†æˆ     |
| **Phase 3** | æ™ºèƒ½ä¸Šä¸‹æ–‡è¿‡æ»¤å’Œ Token ä¼˜åŒ–           | æ€§èƒ½ä¼˜åŒ–å’Œæˆæœ¬æ§åˆ¶ | ç®—æ³•ä¼˜åŒ–         |
| **Phase 4** | åŠ¨æ€ Prompt æ¨¡æ¿å’Œ A/B æµ‹è¯•           | æ•ˆæœä¼˜åŒ–å’ŒæŒç»­æ”¹è¿› | æ•°æ®é©±åŠ¨ä¼˜åŒ–     |

### çŸ¥è¯†åº“å’Œæ£€ç´¢

- **çŸ¥è¯†æº**:

  - ç”¨æˆ·å†å²å¯¹è¯è®°å½•
  - å­¦ä¹ è¿›åº¦å’Œåé¦ˆæ•°æ®
  - ä¸ªæ€§åŒ–ç”¨æˆ·ç”»åƒ
  - è‹±è¯­å­¦ä¹ èµ„æºåº“

- **å‘é‡æ•°æ®åº“**: Weaviateï¼ˆæ”¯æŒæ··åˆç»“æ„åŒ–+åµŒå…¥æ£€ç´¢ï¼‰
- **æ£€ç´¢ç­–ç•¥**:

  - è¯­ä¹‰ç›¸ä¼¼åº¦æ£€ç´¢
  - æ—¶é—´è¡°å‡æƒé‡
  - å†…å®¹ç±»å‹ä¼˜å…ˆçº§
  - é”™è¯¯è®°å½•é«˜æƒé‡ä¿ç•™

- **çŸ¥è¯†æ›´æ–°**: æ¯æ¬¡å¯¹è¯åå®æ—¶æ›´æ–°è®°å¿†åº“ï¼Œæ¯æ—¥ç”Ÿæˆå­¦ä¹ æ‘˜è¦

---

## 3. ç³»ç»Ÿæ¶æ„ (System Architecture)

### æ•´ä½“æ¶æ„

```
ç”¨æˆ·ç•Œé¢ â†’ Gateway â†’ Conversation Service â†’ LLM API
                         â†“
                    Memory Manager
                         â†“
                  Weaviateå‘é‡æ•°æ®åº“
                         â†“
                  User/Learning Context
                         â†“
                Speech/User/Analytics Services
```

### æ ¸å¿ƒç»„ä»¶

- **Conversation Controller**: ä¸»å¯¹è¯æµç¨‹ç®¡ç†å’Œè·¯ç”±
- **Context Manager**: ç”¨æˆ·ç”»åƒå’Œå­¦ä¹ ä¸Šä¸‹æ–‡ç®¡ç†
- **Memory Manager**: é•¿æœŸè®°å¿†å­˜å‚¨ã€æ£€ç´¢å’Œæ›´æ–°
- **RAG Engine**: è®°å¿†æ£€ç´¢å’Œ Prompt å¢å¼º
- **Learning Tracker**: å­¦ä¹ è¿›åº¦è·Ÿè¸ªå’Œç›®æ ‡ç®¡ç†
- **Emotion Analyzer**: ç”¨æˆ·æƒ…ç»ªè¯†åˆ«å’Œåˆ†æ

### æŠ€æœ¯é€‰å‹

- **åç«¯æ¡†æ¶**: Python FastAPI
- **LLM æ¥å£**: OpenAI API (GPT-4o) / Anthropic API (Claude-3.5)
- **å‘é‡æ•°æ®åº“**: Weaviate
- **ç¼“å­˜**: Redis (ä¼šè¯çŠ¶æ€å’Œé¢‘ç¹è®¿é—®æ•°æ®)
- **æ¶ˆæ¯é˜Ÿåˆ—**: RabbitMQ (å¼‚æ­¥è®°å¿†å¤„ç†)
- **æ•°æ®åº“**: PostgreSQL (ç»“æ„åŒ–ç”¨æˆ·æ•°æ®)

---

## 4. æ•°æ®æµå’Œäº¤äº’ (Data Flow & Interactions)

### å…¸å‹å¯¹è¯æµç¨‹

1. **ç”¨æˆ·è¾“å…¥** â†’ æ¥æ”¶æ–‡æœ¬/è¯­éŸ³è½¬æ–‡æœ¬ç»“æœ
2. **ä¸Šä¸‹æ–‡åŠ è½½** â†’ è·å–ç”¨æˆ·ç”»åƒå’Œå½“å‰å­¦ä¹ çŠ¶æ€
3. **è®°å¿†æ£€ç´¢** â†’ RAG æ£€ç´¢ç›¸å…³å†å²å¯¹è¯å’Œå­¦ä¹ è®°å½•
4. **æƒ…ç»ªåˆ†æ** â†’ åˆ†æç”¨æˆ·å½“å‰æƒ…ç»ªçŠ¶æ€
5. **Prompt æ„å»º** â†’ ç»“åˆæ‰€æœ‰ä¸Šä¸‹æ–‡ç”Ÿæˆå®Œæ•´ prompt
6. **LLM è°ƒç”¨** â†’ è·å– AI å“åº”
7. **è®°å¿†æ›´æ–°** â†’ æ›´æ–°å¯¹è¯è®°å½•å’Œå­¦ä¹ çŠ¶æ€
8. **å“åº”è¿”å›** â†’ æ ¼å¼åŒ–è¾“å‡ºç»™ç”¨æˆ·

### æ•°æ®ç»“æ„è®¾è®¡

#### User Profile Context

```json
{
  "user_id": "u001",
  "name": "Alex",
  "age": 25,
  "gender": "male",
  "native_language": "Chinese",
  "english_level": "B1",
  "goals": ["IELTS speaking 7", "Confident in business meetings"],
  "interests": ["travel", "technology", "movies"],
  "personality": "introvert, likes deep thinking",
  "preferred_tone": "friendly and encouraging",
  "communication_style": "prefers text",
  "speaking_challenges": ["pronunciation", "fluency under pressure"],
  "learning_style": "task-based",
  "emotion_preference": "å–œæ¬¢è¢«é¼“åŠ±",
  "cultural_sensitivity": "å…³æ³¨è‹±å¼ç¾å¼å·®å¼‚å’Œç”¨è¯ç¦å¿Œ",
  "pressure": "è½»æ¾å­¦ä¹ çŠ¶æ€",
  "speed_preference": "æ…¢é€Ÿ",
  "created_at": "2025-06-01",
  "updated_at": "2025-06-28"
}
```

#### Learning Context

```json
{
  "user_id": "u001",
  "date": "2025-06-28",
  "today_plan": {
    "topic": "Self Introduction",
    "target_vocab": ["curious", "ambitious"],
    "grammar_focus": "present simple",
    "mode": "speaking practice"
  },
  "history_summary": "Reviewed vocabulary on emotions. Practiced giving opinions about movies.",
  "completed": true,
  "score": {
    "fluency": 6,
    "accuracy": 7,
    "engagement": 8
  },
  "notes": "User had difficulty pronouncing 'curious', showed enthusiasm when discussing travel.",
  "emotional_state": "motivated",
  "followup_recommendation": "Revise emotion vocabulary. Introduce question forms tomorrow.",
  "recording_url": "s3://.../session_20250628.mp3"
}
```

#### Memory Vector Document

```json
{
  "user_id": "u001",
  "doc_id": "20250628_movie_session",
  "content_type": "session_summary",
  "text": "User talked about their favorite movies. Struggled with expressing opinions clearly.",
  "embedding": [0.021, 0.113, ...],
  "tags": ["movie", "opinion", "past_tense"],
  "timestamp": "2025-06-28T14:00:00Z",
  "importance_score": 0.8
}
```

### å¤–éƒ¨é›†æˆ

- **Speech Service**: è¯­éŸ³è½¬æ–‡æœ¬ç»“æœæ¥æ”¶ï¼ŒTTS è¯·æ±‚å‘é€
- **User Service**: ç”¨æˆ·åŸºç¡€ä¿¡æ¯åŒæ­¥
- **Analytics Service**: å­¦ä¹ æ•°æ®ä¸ŠæŠ¥å’Œåˆ†æç»“æœè·å–

---

## 5. æ€§èƒ½å’Œå¯é æ€§ (Performance & Reliability)

### æ€§èƒ½æŒ‡æ ‡

- **å“åº”æ—¶é—´**: ç«¯åˆ°ç«¯å»¶è¿Ÿ < 3 ç§’ï¼ˆåŒ…å« LLM è°ƒç”¨ï¼‰
- **å¹¶å‘å¤„ç†**: æ”¯æŒ 1000+ å¹¶å‘ç”¨æˆ·
- **Token æ¶ˆè€—**: å¹³å‡æ¯æ¬¡å¯¹è¯ < 2000 tokens
- **ç¼“å­˜å‘½ä¸­ç‡**: ç”¨æˆ·ä¸Šä¸‹æ–‡ç¼“å­˜å‘½ä¸­ç‡ > 90%

### å¯é æ€§ä¿éšœ

- **é”™è¯¯å¤„ç†**:

  - LLM API è°ƒç”¨å¤±è´¥é‡è¯•æœºåˆ¶ï¼ˆ3 æ¬¡ï¼ŒæŒ‡æ•°é€€é¿ï¼‰
  - å‘é‡æ•°æ®åº“æŸ¥è¯¢è¶…æ—¶å¤„ç†ï¼ˆ5 ç§’è¶…æ—¶ï¼‰
  - é™çº§åˆ°ç®€åŒ– prompt ç»§ç»­æœåŠ¡

- **é™çº§ç­–ç•¥**:

  - LLM ä¸å¯ç”¨æ—¶ä½¿ç”¨é¢„å®šä¹‰å›å¤æ¨¡æ¿
  - å‘é‡æ£€ç´¢å¤±è´¥æ—¶ä½¿ç”¨åŸºç¡€ç”¨æˆ·ç”»åƒ
  - è®°å¿†æ›´æ–°å¤±è´¥ä¸å½±å“å½“å‰å¯¹è¯

- **ç›‘æ§å‘Šè­¦**:
  - API è°ƒç”¨æˆåŠŸç‡ < 95% å‘Šè­¦
  - å¹³å‡å“åº”æ—¶é—´ > 5 ç§’ å‘Šè­¦
  - å‘é‡æ•°æ®åº“è¿æ¥çŠ¶æ€ç›‘æ§

### å®‰å…¨å’Œåˆè§„

- **è¾“å…¥éªŒè¯**:

  - ç”¨æˆ·è¾“å…¥é•¿åº¦é™åˆ¶ï¼ˆ< 1000 å­—ç¬¦ï¼‰
  - æ•æ„Ÿè¯è¿‡æ»¤å’Œå†…å®¹å®‰å…¨æ£€æŸ¥
  - SQL æ³¨å…¥å’Œ Prompt æ³¨å…¥é˜²æŠ¤

- **è¾“å‡ºè¿‡æ»¤**:

  - LLM è¾“å‡ºå†…å®¹å®‰å…¨æ£€æŸ¥
  - ä¸ªäººéšç§ä¿¡æ¯è¿‡æ»¤
  - ä¸å½“å†…å®¹è¯†åˆ«å’Œæ‹¦æˆª

- **æ•°æ®éšç§**:
  - å¯¹è¯æ•°æ®åŠ å¯†å­˜å‚¨
  - ç”¨æˆ·ç”»åƒæ•°æ®è®¿é—®æ§åˆ¶
  - ç¬¦åˆ GDPR æ•°æ®ä¿æŠ¤è¦æ±‚

---

## 6. æµ‹è¯•å’Œè¯„ä¼° (Testing & Evaluation)

### AI æ¨¡å‹æµ‹è¯•

- **Prompt æµ‹è¯•**:

  - ä¸åŒç”¨æˆ·ç”»åƒä¸‹çš„å“åº”è´¨é‡
  - è®°å¿†æ£€ç´¢å‡†ç¡®æ€§éªŒè¯
  - å­¦ä¹ ç›®æ ‡å¼•å¯¼æ•ˆæœæµ‹è¯•

- **å‡†ç¡®æ€§æµ‹è¯•**:

  - ä¸Šä¸‹æ–‡ç†è§£å‡†ç¡®ç‡æµ‹è¯•
  - å†å²è®°å¿†å¼•ç”¨æ­£ç¡®æ€§
  - å­¦ä¹ è¿›åº¦è·Ÿè¸ªå‡†ç¡®æ€§

- **è¾¹ç•Œæµ‹è¯•**:
  - è¶…é•¿å¯¹è¯ä¸Šä¸‹æ–‡å¤„ç†
  - å¤šè¯­è¨€æ··åˆè¾“å…¥å¤„ç†
  - å¼‚å¸¸ç”¨æˆ·è¡Œä¸ºåº”å¯¹

### ç³»ç»Ÿæµ‹è¯•

- **æ€§èƒ½æµ‹è¯•**:

  - 1000 å¹¶å‘ç”¨æˆ·è´Ÿè½½æµ‹è¯•
  - å‘é‡æ£€ç´¢å“åº”æ—¶é—´æµ‹è¯•
  - å†…å­˜ä½¿ç”¨å’Œ CPU æ€§èƒ½æµ‹è¯•

- **é›†æˆæµ‹è¯•**:
  - ä¸ Speech Service é›†æˆéªŒè¯
  - ç”¨æˆ·æ•°æ®åŒæ­¥æµ‹è¯•
  - è·¨æœåŠ¡æ•°æ®ä¸€è‡´æ€§éªŒè¯

### è¯„ä¼°æŒ‡æ ‡

- **æŠ€æœ¯æŒ‡æ ‡**:

  - å¯¹è¯å“åº”æ—¶é—´ < 2 ç§’
  - è®°å¿†æ£€ç´¢å‡†ç¡®ç‡ > 90%
  - ç³»ç»Ÿå¯ç”¨æ€§ > 99.5%

- **ä¸šåŠ¡æŒ‡æ ‡**:
  - ç”¨æˆ·å­¦ä¹ ç›®æ ‡å®Œæˆç‡
  - å¯¹è¯è´¨é‡è¯„åˆ†
  - ç”¨æˆ·ç•™å­˜ç‡å’Œæ´»è·ƒåº¦

---

## 7. éƒ¨ç½²å’Œè¿ç»´ (Deployment & Operations)

### éƒ¨ç½²ç­–ç•¥

- **ç¯å¢ƒé…ç½®**:

  - å¼€å‘ç¯å¢ƒï¼šå•æœºéƒ¨ç½²ï¼Œä½¿ç”¨ Chroma å‘é‡æ•°æ®åº“
  - æµ‹è¯•ç¯å¢ƒï¼šå°è§„æ¨¡é›†ç¾¤ï¼Œæ¨¡æ‹Ÿç”Ÿäº§é…ç½®
  - ç”Ÿäº§ç¯å¢ƒï¼šKubernetes é›†ç¾¤ï¼ŒWeaviate é›†ç¾¤

- **å‘å¸ƒæµç¨‹**:
  - GitLab CI/CD è‡ªåŠ¨åŒ–éƒ¨ç½²
  - è“ç»¿éƒ¨ç½²ç¡®ä¿é›¶åœæœº
  - Prompt ç‰ˆæœ¬ç®¡ç†å’Œ A/B æµ‹è¯•

### è¿ç»´ç›‘æ§

- **æ ¸å¿ƒæŒ‡æ ‡**:

  - LLM API è°ƒç”¨æˆåŠŸç‡å’Œå»¶è¿Ÿ
  - å‘é‡æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
  - ç”¨æˆ·ä¼šè¯æ´»è·ƒçŠ¶æ€

- **ä¸šåŠ¡æŒ‡æ ‡**:

  - æ¯æ—¥æ´»è·ƒå¯¹è¯æ•°
  - å­¦ä¹ ç›®æ ‡å®Œæˆæƒ…å†µ
  - ç”¨æˆ·æ»¡æ„åº¦åé¦ˆ

- **æˆæœ¬ç›‘æ§**:
  - LLM Token æ¶ˆè€—é‡å’Œè´¹ç”¨
  - å‘é‡æ•°æ®åº“å­˜å‚¨æˆæœ¬
  - æœåŠ¡å™¨èµ„æºä½¿ç”¨æƒ…å†µ

### æŒç»­ä¼˜åŒ–

- **Prompt è¿­ä»£**:

  - åŸºäºç”¨æˆ·åé¦ˆä¼˜åŒ– prompt æ¨¡æ¿
  - A/B æµ‹è¯•ä¸åŒç‰ˆæœ¬çš„æ•ˆæœ
  - å®šæœŸæ›´æ–°æ•™å­¦ç­–ç•¥

- **è®°å¿†åº“ç»´æŠ¤**:
  - å®šæœŸæ¸…ç†è¿‡æœŸæˆ–ä½ä»·å€¼è®°å¿†
  - é‡è¦å­¦ä¹ è®°å½•æƒé‡è°ƒæ•´
  - å‘é‡ç´¢å¼•ä¼˜åŒ–å’Œé‡å»º

---

## é™„å½•

### é£é™©å’Œç¼“è§£

| é£é™©é¡¹           | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½                   |
| ---------------- | ---- | ---- | -------------------------- |
| LLM API ä¸ç¨³å®š   | é«˜   | ä¸­   | å¤šå‚å•†å¤‡é€‰ï¼Œæœ¬åœ°æ¨¡å‹å¤‡ä»½   |
| å‘é‡æ£€ç´¢å»¶è¿Ÿ     | ä¸­   | ä½   | ç¼“å­˜ä¼˜åŒ–ï¼ŒæŸ¥è¯¢è¶…æ—¶å¤„ç†     |
| ç”¨æˆ·éšç§æ³„éœ²     | é«˜   | ä½   | æ•°æ®åŠ å¯†ï¼Œè®¿é—®æ§åˆ¶         |
| è®°å¿†æ•°æ®ä¸¢å¤±     | ä¸­   | ä½   | å®šæœŸå¤‡ä»½ï¼Œå¤šå‰¯æœ¬å­˜å‚¨       |
| Token æˆæœ¬è¶…é¢„ç®— | ä¸­   | ä¸­   | ä½¿ç”¨é‡ç›‘æ§ï¼ŒPrompt ä¼˜åŒ–    |
| å¯¹è¯è´¨é‡ä¸‹é™     | é«˜   | ä¸­   | è´¨é‡ç›‘æ§ï¼ŒåŠæ—¶ Prompt è°ƒä¼˜ |

### RAG æ£€ç´¢ç­–ç•¥è¯¦è§£

- **æ—¶é—´è¡°å‡**: è¶…è¿‡ 7 å¤©çš„è®°å¿†æƒé‡è¡°å‡ 50%ï¼Œè¶…è¿‡ 30 å¤©è¡°å‡ 80%
- **å†…å®¹æ ‡ç­¾åŒ¹é…**: ç›¸åŒä¸»é¢˜æ ‡ç­¾æƒé‡ +0.3ï¼Œé”™è¯¯è®°å½•æƒé‡ +0.5
- **æ£€ç´¢ä¼˜åŒ–**: Top-K=5ï¼Œç›¸ä¼¼åº¦é˜ˆå€¼ 0.7ï¼Œæ··åˆæ£€ç´¢ï¼ˆè¯­ä¹‰+å…³é”®è¯ï¼‰
- **Prompt æ‹¼æ¥**: æœ€å¤šæ’å…¥ 3 æ¡å†å²è®°å½•ï¼Œæ€»é•¿åº¦æ§åˆ¶åœ¨ 500 tokens å†…
